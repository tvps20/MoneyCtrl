<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header card-header-tabs card-header-info">
                        <div class="nav-tabs-navigation">
                            <div class="nav-tabs-wrapper">
                                <ul class="nav nav-tabs" data-tabs="tabs">
                                    <li class="nav-item">
                                        <a mat-button class="nav-link active" href="#compras" data-toggle="tab">
                                            <i class="material-icons">shop_two</i> Compras
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a mat-button class="nav-link" href="#dividas" data-toggle="tab">
                                            <i class="material-icons">swap_vert</i> Dividas
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a mat-button class="nav-link" href="#creditos" data-toggle="tab">
                                            <i class="material-icons">attach_money</i> Creditos
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a mat-button class="nav-link" href="#adicionar" data-toggle="tab">
                                            <i class="material-icons">library_add</i> Adicionar
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a mat-button class="nav-link" href="#atualizar" data-toggle="tab">
                                            <i class="material-icons">person</i> Atualizar
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <div class="tab-pane active" id="compras">
                                <div class="table-responsive">
                                    <table class="table table-hover"
                                        *ngIf="comprador.lancamentos.length > 0; else loadingListEmptyLancamentos">
                                        <thead class="text-primary">
                                            <th>Descrição</th>
                                            <th>valor</th>
                                            <th>Parcela</th>
                                            <th>Especificação</th>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Amazon Prime</td>
                                                <td>R$ 9,90</td>
                                                <td>Assinatura</td>
                                                <td>Cartao Nubank</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <ng-template #loadingListEmptyLancamentos>
                                        <p class="text-muted text-center">Nenhuma compra disponivel para esse comprador.
                                        </p>
                                    </ng-template>
                                </div>
                            </div>
                            <div class="tab-pane" id="dividas">
                                <div class="table-responsive">
                                    <table class="table table-hover"
                                        *ngIf="comprador.dividas.length > 0; else loadingListEmptyDividas">
                                        <thead class=" text-primary">
                                            <th>Descrição</th>
                                            <th>Valor Total</th>
                                            <th>Valor Pago</th>
                                            <th>Tipo</th>
                                            <th>Status</th>
                                            <th>Ação</th>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let divida of comprador.dividas">
                                                <td>{{ divida.descricao }}</td>
                                                <td>{{ divida.valorDivida }}</td>
                                                <td>{{ divida.totalPagamentos }}</td>
                                                <td>
                                                    <i *ngIf="divida.faturaId" class="material-icons">receipt_long</i>
                                                    <i *ngIf="!divida.faturaId"
                                                        class="material-icons">monetization_on</i>
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-success btn-sm"
                                                        disabled>{{ divida.paga }}</button>
                                                </td>
                                                <td class="text-primary">
                                                    <button mat-raised-button type="button" matTooltip="Pagar"
                                                        matTooltipPosition="above"
                                                        class="btn btn-primary btn-link btn-sm btn-just-icon">
                                                        <i class="material-icons">done</i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <ng-template #loadingListEmptyDividas>
                                        <p class="text-muted text-center">Nenhuma dívida disponivel para esse comprador.
                                        </p>
                                    </ng-template>
                                </div>
                            </div>
                            <div class="tab-pane" id="creditos">
                                <div class="table-responsive">
                                    <table class="table table-hover"
                                        *ngIf="comprador.creditos.length > 0; else loadingListEmptyCreditos">
                                        <thead class=" text-primary">
                                            <th>Descrição</th>
                                            <th>Valor</th>
                                            <th>Data</th>
                                            <th>Status</th>
                                            <th>Ação</th>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let credito of comprador.creditos">
                                                <td>{{ credito.descricao }}</td>
                                                <td>{{ credito.valor | currency:'BRL' }}</td>
                                                <td>{{ credito.data | date: 'dd/MM/yyyy' }}</td>
                                                <td>{{ credito.disponivel }}</td>
                                                <td class="text-primary">
                                                    <button mat-raised-button type="button" matTooltip="Excluir"
                                                        matTooltipPosition="above" (click)="onSelectedEntity(credito)"
                                                        data-toggle="modal" data-target="#modalExcluirCredito"
                                                        class="btn btn-primary btn-link btn-sm btn-just-icon">
                                                        <i class="material-icons">close</i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <ng-template #loadingListEmptyCreditos>
                                        <p class="text-muted text-center">Nenhum crédito disponivel para esse comprador.
                                        </p>
                                    </ng-template>
                                </div>
                            </div>
                            <div class="tab-pane" id="adicionar">
                                <div class="card-body">
                                    <form [formGroup]="formulario" (ngSubmit)="onSubmit()" autocomplete="off">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <app-input-field formControlName="descricao" label="Descrição"
                                                    [control]="formulario.get('descricao')">
                                                </app-input-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Valor</mat-label>
                                                    <input matInput mask="separator.2" thousandSeparator="."
                                                        prefix="R$ " formControlName="valor">
                                                    <mat-icon matSuffix class="text-danger"
                                                        *ngIf="verificarValidControl('valor')">error</mat-icon>
                                                    <mat-icon matSuffix class="text-success"
                                                        *ngIf="verificarValidControlSuccess('valor')">done</mat-icon>
                                                    <mat-hint>
                                                        <div class="text-danger" *ngIf="verificarValidControl('valor')">
                                                            {{ errorMessage('valor', 'Valor') }}
                                                        </div>
                                                    </mat-hint>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <button *ngIf="!submitte" type="submit"
                                        class="btn btn-info pull-right">Salvar</button>
                                        <button *ngIf="submitte" type="button" class="btn btn-info pull-right" disabled>
                                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                            Salvando
                                        </button>
                                    </form>
                                </div>
                            </div>
                            <div class="tab-pane" id="atualizar">
                                <div class="card-body">
                                    <form>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Nome</mat-label>
                                                    <input matInput placeholder="Nome" type="text">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Sobrenome</mat-label>
                                                    <input matInput placeholder="Sobrenome" type="text">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-2">
                                                <mat-radio-group aria-label="Select an option">
                                                    <mat-radio-button value="1">Usuario</mat-radio-button>
                                                    <mat-radio-button checked value="2">Comprador</mat-radio-button>
                                                </mat-radio-group>
                                            </div>
                                            <div class="col-md-2">
                                                <mat-checkbox>Admin</mat-checkbox>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Username</mat-label>
                                                    <input matInput placeholder="Username">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-7" style="padding-top: -10px;">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Email</mat-label>
                                                    <input matInput placeholder="Email" type="email">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Senha</mat-label>
                                                    <input matInput placeholder="Senha" type="password">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>Confirmar Senha</mat-label>
                                                    <input matInput placeholder="Confirmar Senha" type="password">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <button mat-raised-button appearance="outline" type="submit"
                                            class="btn btn-info pull-right">Atualizar</button>
                                        <div class="clearfix"></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-profile">
                    <div class="card-avatar">
                        <a href="javascript:void(0)">
                            <img class="img" src="../../../../assets/img/faces/marc.jpg" />
                        </a>
                    </div>
                    <div class="card-body">
                        <h6 class="card-category text-gray">{{ comprador.tipo }}</h6>
                        <h4 class="card-title">
                            {{ comprador.nome + ' ' + (comprador.sobrenome ? comprador.sobrenome : '') }}</h4>
                        <p class="card-description">
                            Total de compras: {{ comprador.lancamentos.length }}<br />
                            Dividas Ativas: {{ comprador.totalDividas | currency:'BRL' }}<br />
                            Credito Disponível: {{ comprador.totalCreditos | currency:'BRL' }}
                        </p>
                        <a href="javascript:void(0)" class="btn btn-info btn-round">Imprimir</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de aviso excluir -->
<app-modal-aviso identificador="modalExcluirCredito" (confimaModal)="onDelete($event)"></app-modal-aviso>
